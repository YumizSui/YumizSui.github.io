---
interface Props {
  url: string;
  title: string;
  lang?: 'ja' | 'en';
}

const { url, title, lang = 'ja' } = Astro.props;
const encodedUrl = encodeURIComponent(url);
const encodedTitle = encodeURIComponent(title);

// Share URLs
const xUrl = `https://x.com/intent/tweet?text=${encodedTitle}&url=${encodedUrl}`;
const blueskyUrl = `https://bsky.app/intent/compose?text=${encodedTitle}%20${encodedUrl}`;
const facebookUrl = `https://www.facebook.com/sharer/sharer.php?u=${encodedUrl}`;
const hatenaUrl = `https://b.hatena.ne.jp/entry/${encodedUrl}`;

---

<div class="flex flex-wrap gap-2">
  <a
    href={xUrl}
    target="_blank"
    rel="noopener noreferrer"
    class="inline-flex items-center justify-center w-8 h-8 bg-black dark:bg-white text-white dark:text-black rounded hover:opacity-80 transition"
    aria-label="Share on X"
  >
    <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
      <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
    </svg>
  </a>

  <a
    href={blueskyUrl}
    target="_blank"
    rel="noopener noreferrer"
    class="inline-flex items-center justify-center w-8 h-8 bg-[#0085ff] text-white rounded hover:opacity-80 transition"
    aria-label="Share on BlueSky"
  >
    <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
      <path d="M12 10.8c-1.087-2.114-4.046-6.053-6.798-7.995C2.566.944 1.561 1.266.902 1.565.139 1.908 0 3.08 0 3.768c0 .69.378 5.65.624 6.479.815 2.736 3.713 3.66 6.383 3.364.136-.02.275-.039.415-.056-.138.022-.276.04-.415.056-3.912.58-7.387 2.005-2.83 7.078 5.013 5.19 6.87-1.113 7.823-4.308.953 3.195 2.05 9.271 7.733 4.308 4.267-4.308 1.172-6.498-2.74-7.078a8.741 8.741 0 0 1-.415-.056c.14.017.279.036.415.056 2.67.297 5.568-.628 6.383-3.364.246-.828.624-5.79.624-6.478 0-.69-.139-1.861-.902-2.206-.659-.298-1.664-.62-4.3 1.24C16.046 4.748 13.087 8.687 12 10.8Z"/>
    </svg>
  </a>

  <a
    href={facebookUrl}
    target="_blank"
    rel="noopener noreferrer"
    class="inline-flex items-center justify-center w-8 h-8 bg-[#1877f2] text-white rounded hover:opacity-80 transition"
    aria-label="Share on Facebook"
  >
    <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
      <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
    </svg>
  </a>

  {lang === 'ja' && (
    <a
      href={hatenaUrl}
      target="_blank"
      rel="noopener noreferrer"
      class="inline-flex items-center justify-center w-8 h-8 bg-[#00a4de] text-white rounded hover:opacity-80 transition"
      aria-label="はてなブックマークに追加"
    >
      <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
        <path d="M4.5 0C2.015 0 0 2.015 0 4.5v15C0 21.985 2.015 24 4.5 24h15c2.485 0 4.5-2.015 4.5-4.5v-15C24 2.015 21.985 0 19.5 0h-15zm2.313 3.75h2.812c1.266 0 2.25.234 2.953.703.703.469 1.055 1.195 1.055 2.18 0 .609-.164 1.125-.492 1.546-.328.422-.797.703-1.406.844v.024c.75.14 1.336.453 1.758.937.422.485.633 1.086.633 1.805 0 1.055-.363 1.875-1.09 2.461-.726.586-1.734.88-3.023.88H6.813V3.75zm11.484 0h2.11v10.055h-2.11V3.75zm-9.844 1.875v2.813h1.172c.578 0 1.008-.11 1.29-.328.28-.219.421-.547.421-.984 0-.422-.148-.742-.445-.961-.297-.22-.734-.329-1.313-.329H8.453zm0 4.688v3.164h1.523c.594 0 1.04-.125 1.336-.375.297-.25.446-.625.446-1.125s-.149-.868-.446-1.102c-.296-.234-.742-.351-1.336-.351H8.453zm9.844 5.367c.406 0 .758.133 1.055.398.297.266.445.598.445 1 0 .391-.148.719-.445.984-.297.266-.649.399-1.055.399-.422 0-.773-.133-1.054-.399-.282-.265-.422-.593-.422-.984 0-.402.14-.734.422-1 .281-.265.632-.398 1.054-.398z"/>
      </svg>
    </a>
  )}
</div>
